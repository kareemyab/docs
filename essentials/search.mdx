---
title: '/search'
description: 'Searches for existing on-chain registration records by uploading a file and matching its content hash.'
icon: 'magnifying-glass'
openapi: 'POST /search'
---

## What This Endpoint Does

<Steps>
  <Step title="Hash Validation">
    Validates the provided content hash format
  </Step>
  <Step title="On-Chain Search">
    Queries the Solana blockchain for matching content registration records
  </Step>
  <Step title="Data Enrichment">
    Fetches complete registration details and current validation status
  </Step>
  <Step title="User Lookup">
    Attempts to find associated user IDs for the file creators
  </Step>
  <Step title="Result Formatting">
    Returns comprehensive registration information with validation status
  </Step>
</Steps>

---

## Parameters

<ResponseField name="contentHash" type="string" required>
  SHA256 hash of the file content (hex encoded)
  
  **Constraints:** Must be a valid 64-character hex string
  
  Example: `"a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3"`
</ResponseField>

---



## Response Examples

### Success Response (200)

<ResponseField name="message" type="string">
  Success confirmation with record count
  
  Example: `"Found 1 record(s) for your file on the blockchain."`
</ResponseField>

<ResponseField name="details" type="array">
  Array of matching registration records
  
  <Expandable title="SearchRecord Object">
    <ResponseField name="contentHash" type="string">
      SHA256 hash of the file content (hex format)
      
      Example: `"a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3"`
    </ResponseField>
    
    <ResponseField name="pdaAddress" type="string">
      Solana Program Derived Address for this registration
      
      Example: `"8qbHbw2BbbTHBW1sbeqakYXVKRQM8Ne7pLK7m6CVfeR"`
    </ResponseField>
    
    <ResponseField name="onChainRegistration" type="object">
      Complete on-chain registration data
      
      <Expandable title="OnChainRegistration Object">
        <ResponseField name="contentHash" type="array">
          Content hash as byte array (used internally)
        </ResponseField>
        
        <ResponseField name="creator" type="string">
          Wallet address that registered the file
        </ResponseField>
        
        <ResponseField name="ipfsCid" type="string">
          IPFS Content Identifier for metadata storage
        </ResponseField>
        
        <ResponseField name="totalVotes" type="number">
          Total number of validator votes received
        </ResponseField>
        
        <ResponseField name="yesVotes" type="number">
          Number of positive verification votes
        </ResponseField>
        
        <ResponseField name="noVotes" type="number">
          Number of negative verification votes
        </ResponseField>
        
        <ResponseField name="timestamp" type="number">
          Unix timestamp when file was registered
        </ResponseField>
        
        <ResponseField name="finalized" type="boolean">
          Whether validation process is complete
        </ResponseField>
        
        <ResponseField name="consensusPercentage" type="number">
          Percentage of positive votes (yesVotes/totalVotes * 100)
        </ResponseField>
        
        <ResponseField name="assignedValidators" type="array">
          List of validators assigned to verify this file
        </ResponseField>
        
        <ResponseField name="validatorsWhoVoted" type="array">
          List of validators who have submitted votes
        </ResponseField>
      </Expandable>
    </ResponseField>
    
    <ResponseField name="userID" type="string">
      Associated user ID (if available)
      
      Example: `"user_12345"`
    </ResponseField>
  </Expandable>
</ResponseField>

---

## Prerequisites

Before searching, you need:

<Check>**Content hash**: SHA256 hash of the file you want to search for</Check>

<Info>
**Don't have the hash?** You can calculate it from your file:

```bash
# Unix/Mac
shasum -a 256 your-file.pdf

# Windows (PowerShell)
Get-FileHash your-file.pdf -Algorithm SHA256

# Node.js
const crypto = require('crypto');
const fs = require('fs');
const hash = crypto.createHash('sha256').update(fs.readFileSync('your-file.pdf')).digest('hex');
```
</Info>

---

## Complete Example

<Steps>
  <Step title="Calculate File Hash">
    First, get the SHA256 hash of your file:
    
    ```bash
    shasum -a 256 document.pdf
    # Output: a7b2c3d4e5f6789... document.pdf
    ```
  </Step>
  
  <Step title="Search Trust Engine">
    Use the hash to search for registrations:
    
    ```bash
    curl -X POST https://core-api-server.onrender.com/search \
      -H "Content-Type: application/json" \
      -d '{"contentHash": "a7b2c3d4e5f6789..."}'
    ```
  </Step>
  
  <Step title="Interpret Results">
    The response tells you if the file is registered and its verification status:
    
    - **Found + Verified**: File is registered with consensus ≥67%
    - **Found + Pending**: File is registered but validation in progress  
    - **Found + Disputed**: File is registered but consensus 67%
    - **Not Found**: File has never been registered
  </Step>
</Steps>

---

## Understanding Search Results

### Validation Status

<Tabs>
  <Tab title="Verified">
    **Status**: `finalized: true` with ≥67% consensus
    
    **Meaning**: Validators have completed verification and reached consensus that the file is authentic and valid.
    
    ```json
    {
      "finalized": true,
      "consensusPercentage": 100,
      "totalVotes": 3,
      "yesVotes": 3,
      "noVotes": 0
    }
    ```
  </Tab>
  
  <Tab title="Pending Verification">
    **Status**: `finalized: false`
    
    **Meaning**: File is registered but validators are still in the process of verification.
    
    ```json
    {
      "finalized": false,
      "consensusPercentage": 0,
      "totalVotes": 0,
      "yesVotes": 0,
      "noVotes": 0
    }
    ```
  </Tab>
  
  <Tab title="Rejected">
    **Status**: `finalized: true` with &lt;67% consensus
    
    **Meaning**: Validators completed verification but consensus was not reached for file validity.
    
    ```json
    {
      "finalized": true,
      "consensusPercentage": 33,
      "totalVotes": 3,
      "yesVotes": 1,
      "noVotes": 2
    }
    ```
  </Tab>
</Tabs>

### Consensus Calculation

<Info>
**Consensus Formula**: `(yesVotes / totalVotes) * 100`

- **≥67%**: File verification **PASSED** (consensus reached)
- **&lt;67%**: File verification **FAILED** (consensus not reached)
- **Pending**: Validators still voting (`totalVotes: 0`)
</Info>

---

## Related Endpoints

<CardGroup cols={2}>
  <Card title="Register Files" icon="file-plus" href="/essentials/register">
    Use the `/register` endpoint to register files
  </Card>
  
  <Card title="Create Wallet" icon="wallet" href="/essentials/create-wallet">
    Use the `/create-wallet` endpoint
  </Card>
  
  <Card title="Check Balance" icon="scale-balanced" href="/essentials/wallet-balance">
    Use the `/wallet-balance` endpoint
  </Card>
  
  <Card title="Store Relations" icon="link" href="/api-reference/endpoint/link-wallet">
    Use the `/link-wallet` endpoint if needed
  </Card>
</CardGroup>
