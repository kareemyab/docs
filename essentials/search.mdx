---
title: '/search'
description: 'Searches for existing on-chain registration records by uploading a file and matching its content hash.'
icon: 'magnifying-glass'
openapi: 'POST /search'
---

## What This Endpoint Does

<Steps>
  <Step title="Hash Validation">
    Validates the provided content hash format
  </Step>
  <Step title="On-Chain Search">
    Queries the Solana blockchain for matching content registration records
  </Step>
  <Step title="Data Enrichment">
    Fetches complete registration details and current validation status
  </Step>
  <Step title="User Lookup">
    Attempts to find associated user IDs for the file creators
  </Step>
  <Step title="Result Formatting">
    Returns comprehensive registration information with validation status
  </Step>
</Steps>

---

## Parameters

<ResponseField name="contentHash" type="string" required>
  SHA256 hash of the file content (hex encoded)
  
  **Constraints:** Must be a valid 64-character hex string
  
  Example: `"a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3"`
</ResponseField>

<ResponseField name="walletAddress" type="string" optional>
  Wallet address to filter search results to specific registrations
  
  **Constraints:** Must be a valid Solana public key
  
  Example: `"9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"`
</ResponseField>

<Info>
**Search Modes:**
- **Content Hash Only**: Returns all registrations for this file hash
- **Content Hash + Wallet**: Returns specific registration by this wallet for this file hash
</Info>

---



## Response Examples

### Success Response (200)

<ResponseField name="searchMode" type="string">
  The type of search performed
  
  Example: `"content_hash_only"` or `"content_hash_and_wallet"`
</ResponseField>

<ResponseField name="message" type="string">
  Success confirmation with search details
  
  Example: `"Found the specific registration for this content hash and wallet address."`
</ResponseField>

<ResponseField name="searchCriteria" type="object">
  The search parameters that were used
  
  <Expandable title="SearchCriteria Object">
    <ResponseField name="contentHash" type="string">
      The content hash that was searched for
      
      Example: `"a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901234"`
    </ResponseField>
    
    <ResponseField name="walletAddress" type="string" optional>
      The wallet address filter (if provided)
      
      Example: `"9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"`
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="totalResults" type="number">
  Number of registration records found
  
  Example: `1`
</ResponseField>

<ResponseField name="registrations" type="array">
  Array of matching registration records
  
  <Expandable title="Registration Object">
    <ResponseField name="contentHash" type="string">
      SHA256 hash of the file content
      
      Example: `"a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901234"`
    </ResponseField>
    
    <ResponseField name="pdaAddress" type="string">
      Solana Program Derived Address for this registration
      
      Example: `"8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY"`
    </ResponseField>
    
    <ResponseField name="ipfsCid" type="string">
      IPFS Content Identifier for metadata storage
      
      Example: `"QmX7Rt8VBgKdNzF4mP6YvWzNfEtY2jDw5mVpL1WzNfEtYz"`
    </ResponseField>
    
    <ResponseField name="registeredBy" type="string">
      Wallet address that registered the file
      
      Example: `"9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"`
    </ResponseField>
    
    <ResponseField name="userID" type="string">
      Associated user ID
      
      Example: `"user_123456789"`
    </ResponseField>
    
    <ResponseField name="timestamp" type="string">
      ISO timestamp when file was registered
      
      Example: `"2024-01-15T14:30:25.000Z"`
    </ResponseField>
    
    <ResponseField name="validationStatus" type="string">
      Current validation status
      
      Example: `"Verified"`, `"Pending"`, or `"Rejected"`
    </ResponseField>
    
    <ResponseField name="consensus" type="string">
      Consensus percentage from validators
      
      Example: `"85%"`
    </ResponseField>
    
    <ResponseField name="explorerUrl" type="string">
      Link to view on Solana Explorer
      
      Example: `"https://explorer.solana.com/address/8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY?cluster=devnet"`
    </ResponseField>
    
    <ResponseField name="onChainData" type="object">
      Raw blockchain data (implementation details)
    </ResponseField>
  </Expandable>
</ResponseField>

### Error Response (404)

<ResponseField name="error" type="boolean">
  Error flag indicating no records found
  
  Example: `true`
</ResponseField>

<ResponseField name="message" type="string">
  Error description for not found
  
  Example: `"No records found for the provided content hash."`
</ResponseField>

## Example Responses

<CodeGroup>
```json Content Hash + Wallet Search (200)
{
  "searchMode": "content_hash_and_wallet",
  "message": "Found the specific registration for this content hash and wallet address.",
  "searchCriteria": {
    "contentHash": "a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901234",
    "walletAddress": "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"
  },
  "totalResults": 1,
  "registrations": [
    {
      "contentHash": "a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901234",
      "pdaAddress": "8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY",
      "ipfsCid": "QmX7Rt8VBgKdNzF4mP6YvWzNfEtY2jDw5mVpL1WzNfEtYz",
      "registeredBy": "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM",
      "userID": "user_123456789",
      "timestamp": "2024-01-15T14:30:25.000Z",
      "validationStatus": "Verified",
      "consensus": "85%",
      "explorerUrl": "https://explorer.solana.com/address/8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY?cluster=devnet",
      "onChainData": { /* Raw blockchain data */ }
    }
  ]
}
```

```json Content Hash Only Search (200)
{
  "searchMode": "content_hash_only",
  "message": "Found 2 registration(s) for this content hash.",
  "searchCriteria": {
    "contentHash": "a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901234"
  },
  "totalResults": 2,
  "registrations": [
    {
      "contentHash": "a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901234",
      "pdaAddress": "8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY",
      "ipfsCid": "QmX7Rt8VBgKdNzF4mP6YvWzNfEtY2jDw5mVpL1WzNfEtYz",
      "registeredBy": "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM",
      "userID": "user_123456789",
      "timestamp": "2024-01-15T14:30:25.000Z",
      "validationStatus": "Verified",
      "consensus": "85%",
      "explorerUrl": "https://explorer.solana.com/address/8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY?cluster=devnet"
    },
    {
      "contentHash": "a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901234",
      "pdaAddress": "9mPv3gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtX",
      "ipfsCid": "QmY8St9VBgKdNzF4mP6YvWzNfEtY2jDw5mVpL1WzNfEtYa",
      "registeredBy": "7XzEYwCbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWN",
      "userID": "user_987654321",
      "timestamp": "2024-01-16T09:15:10.000Z",
      "validationStatus": "Pending",
      "consensus": "0%",
      "explorerUrl": "https://explorer.solana.com/address/9mPv3gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtX?cluster=devnet"
    }
  ]
}
```
</CodeGroup>

<Tabs>
  <Tab title="Not Found (404)">
    ```json
    {
      "error": true,
      "message": "No records found for the provided content hash."
    }
    ```
  </Tab>
  <Tab title="Invalid Hash (400)">
    ```json
    {
      "error": true,
      "message": "Invalid content hash format. Must be a 64-character hex string."
    }
    ```
  </Tab>
  <Tab title="Invalid Wallet (400)">
    ```json
    {
      "error": true,
      "message": "Invalid wallet address format. Must be a valid Solana public key."
    }
    ```
  </Tab>
</Tabs>

---

## Understanding Validation Status

<Info>
**Validation Status Values:**
- **"Verified"**: File passed validation with â‰¥67% consensus
- **"Pending"**: Validation still in progress
- **"Rejected"**: File failed validation with &lt;67% consensus
</Info>

<Tip>
**Pro Tip**: Use the `walletAddress` parameter to find specific registrations when multiple users have registered the same file.
</Tip>


