---
title: '/register'
description: 'Registers a file with the Trust Engine protocol, initiating the decentralized verification process.'
icon: 'file-plus'
openapi: 'POST /register'
---

## What This Endpoint Does

<Steps>
  <Step title="File Validation">
    Validates file type
  </Step>
  <Step title="Wallet Verification">
    Checks wallet has sufficient Reward Tokens for fees
  </Step>
  <Step title="IPFS Upload">
    Uploads file to IPFS and generates Content Identifier (CID)
  </Step>
  <Step title="On-Chain Registration">
    Creates immutable proof record on Solana blockchain
  </Step>
  <Step title="Verification Process">
    Initiates decentralized verification through validator network
  </Step>
</Steps>

---

## Parameters

<ResponseField name="contentTitle" type="string" required>
  Title for the content being registered
  
  **Constraints:** Required field, maximum 100 characters
  
  Example: `"My Important Document"`
</ResponseField>

<ResponseField name="walletAddress" type="string" required>
  User's public Solana wallet address
  
  **Constraints:** Must be a valid Solana public key
  
  Example: `"9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"`
</ResponseField>

<ResponseField name="walletType" type="string" required>
  Wallet provider type used for registration
  
  **Constraints:** Must be either `"standard"` or `"crossmint"`
  
  Example: `"crossmint"`
</ResponseField>

<ResponseField name="contentHash" type="string" required>
  SHA256 hash of the file content (hex encoded)
  
  **Constraints:** Must be a valid 64-character hex string
  
  Example: `"70228527096ba198ca89d90a0ac922055a6a2760a0e4f7d61918e6c60467c47a"`
</ResponseField>

<ResponseField name="fileMetadata" type="object" optional>
  Metadata about the file being registered
  
  <Expandable title="File Metadata Object">
    <ResponseField name="fileName" type="string" optional>
      Original name of the file
      
      Example: `"document.pdf"`
    </ResponseField>
    
    <ResponseField name="fileSize" type="number" optional>
      Size of the file in bytes
      
      Example: `12345`
    </ResponseField>
    
    <ResponseField name="mimeType" type="string" optional>
      MIME type of the file
      
      Example: `"application/pdf"`
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="metadata" type="string" optional>
  Additional metadata about the file
  
  **Constraints:** Maximum 500 characters
  
  Example: `"This document was created for project verification purposes"`
</ResponseField>

<ResponseField name="claimHash" type="string" optional>
  SHA256 hash for secret verification (hex encoded)
  
  **Constraints:** Optional 64-character hex string for claim verification
  
  Example: `"110f211f367825834d6897c0efd0b05b35adb744a5836dcd478d384d2a938f15"`
</ResponseField>


---



## Response Examples

#### Success Response (202 - Crossmint)

<ResponseField name="message" type="string">
  Success confirmation message for Crossmint wallet transactions
  
  Example: `"âœ… SUBMISSION ACCEPTED âœ…"`
</ResponseField>

<ResponseField name="details" type="object">
  Registration submission details for Crossmint wallets
  
  <Expandable title="Details Object">
    <ResponseField name="status" type="string">
      Current status of the registration
      
      Example: `"Pending Verification"`
    </ResponseField>
    
    <ResponseField name="crossmintTransactionId" type="string">
      Crossmint transaction identifier
      
      Example: `"2nBhEBYYvfaAe16UMNqRHre4YNSskvuYgx3M6E4JP1oDYvZEJHvoPzyUwkoB6VRYuVEMarHNr9RxJWnyb8FnFnBg"`
    </ResponseField>
    
    <ResponseField name="contentRegistrationPDA" type="string">
      Program Derived Address for the content registration
      
      Example: `"8qbHbw2BbbTHBW1sbeqakYXVKRQM8Ne7pLK7m6CVfeR"`
    </ResponseField>
    
    <ResponseField name="ipfsCid" type="string">
      IPFS Content Identifier for the file metadata
      
      Example: `"QmExampleCidForYourFileMetadata..."`
    </ResponseField>
    
    <ResponseField name="processingFee" type="string">
      Transaction fee information in SOL and lamports
      
      Example: `"~0.000005000 SOL (5,000 lamports)"`
    </ResponseField>
    
    <ResponseField name="solanaExplorer" type="string">
      Direct link to view the transaction on Solana Explorer
      
      Example: `"https://explorer.solana.com/tx/<TRANSACTION_ID>?cluster=devnet"`
    </ResponseField>
  </Expandable>
</ResponseField>

#### Success Response (200 - Standard Wallet)

<ResponseField name="message" type="string">
  Success confirmation message for standard wallet transactions
  
  Example: `"âœ… TRANSACTION READY âœ…"`
</ResponseField>

<ResponseField name="details" type="object">
  Transaction preparation details for standard wallets
  
  <Expandable title="Details Object">
    <ResponseField name="status" type="string">
      Current status requiring client action
      
      Example: `"Requires Client Signature"`
    </ResponseField>
    
    <ResponseField name="ipfsCid" type="string">
      IPFS Content Identifier for the file metadata
      
      Example: `"QmExampleCidForYourFileMetadata..."`
    </ResponseField>
    
    <ResponseField name="contentRegistrationPDA" type="string">
      Program Derived Address for the content registration
      
      Example: `"8qbHbw2BbbTHBW1sbeqakYXVKRQM8Ne7pLK7m6CVfeR"`
    </ResponseField>
    
    <ResponseField name="transaction" type="string">
      Base64-encoded transaction ready for client signing
      
      Example: `"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEDArczbMia1tLmq2poQiNXU2xnkV4S4gK9bS6Kz..."`
    </ResponseField>
  </Expandable>
</ResponseField>

#### Error Response (400 - Missing File)

<ResponseField name="error" type="boolean">
  Error flag indicating request failure
  
  Example: `true`
</ResponseField>

<ResponseField name="message" type="string">
  Error description for missing file
  
  Example: `"ðŸš« FILE MISSING ðŸš«"`
</ResponseField>

<ResponseField name="details" type="string">
  Additional error context and guidance
  
  Example: `"Oops! It looks like you forgot to upload a file. Please attach a file to your request."`
</ResponseField>

#### Error Response (409 - Duplicate Registration)

<ResponseField name="error" type="boolean">
  Error flag indicating duplicate registration
  
  Example: `true`
</ResponseField>

<ResponseField name="message" type="string">
  Error description for duplicate file
  
  Example: `"ðŸš« FILE ALREADY REGISTERED ðŸš«"`
</ResponseField>

<ResponseField name="details" type="object">
  Duplicate registration details
  
  <Expandable title="Details Object">
    <ResponseField name="contentHash" type="string">
      SHA256 hash of the already registered file
      
      Example: `"a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3"`
    </ResponseField>
    
    <ResponseField name="pdaAddress" type="string">
      Program Derived Address of existing registration
      
      Example: `"8qbHbw2BbbTHBW1sbeqakYXVKRQM8Ne7pLK7m6CVfeR"`
    </ResponseField>
    
    <ResponseField name="suggestion" type="string">
      Recommended action for the user
      
      Example: `"Use the /search endpoint"`
    </ResponseField>
  </Expandable>
</ResponseField>

---

## Code Examples

### Raw Response Formats

<CodeGroup>
```text Success (202 Crossmint)
âœ… SUBMISSION ACCEPTED âœ…
--------------------------------------------------
âœ… Accepted! Your file has been submitted for verification via Crossmint.

--- Details ---
    Status                  : Pending Verification
    Transaction ID          : <TRANSACTION_ID_HERE>
    Content Registration PDA: <PDA_ADDRESS_HERE>
    IPFS CID                : <IPFS_CID_HERE>
    Processing Fee          : ~<SOL_AMOUNT> SOL (<LAMPORTS> lamports)
    Solana Explorer         : https://explorer.solana.com/tx/<TRANSACTION_ID_HERE>?cluster=<cluster>
--------------------------------------------------
```

```text Success (200 Standard Wallet)
âœ… TRANSACTION READY âœ…
--------------------------------------------------
Transaction prepared. Please sign and submit via your wallet.

--- Details ---
    Status                  : Requires Client Signature
    IPFS CID                : <IPFS_CID_HERE>
    Content Registration PDA: <PDA_ADDRESS_HERE>
    Transaction (Base64)    : <BASE64_TRANSACTION_HERE>
--------------------------------------------------
```
</CodeGroup>

### Raw Error Formats

<CodeGroup>
```text Missing File (400)
ðŸš« FILE MISSING ðŸš«
--------------------------------------------------
Oops! It looks like you forgot to upload a file. Please attach a file to your request.
--------------------------------------------------
```

```text File Validation Failed (400)
ðŸš« FILE VALIDATION FAILED ðŸš«
--------------------------------------------------
File validation failed: File type not allowed: <mime/type>
--------------------------------------------------
```

```text Missing Required Fields (400)
ðŸš« MISSING REQUIRED FIELDS ðŸš«
--------------------------------------------------
Hold on! We need `contentTitle`, `contentDescription`, `walletAddress`, and `walletType` to proceed.

--- Details ---
    missingFields        : [contentTitle, contentDescription, walletAddress, walletType]
--------------------------------------------------
```

```text Invalid Wallet Type (400)
ðŸš« INVALID WALLET TYPE ðŸš«
--------------------------------------------------
Invalid `walletType`. It must be either 'standard' or 'crossmint'.
--------------------------------------------------
```

```text No User-Key Relation (400)
ðŸš« USER-KEY RELATION REQUIRED ðŸš«
--------------------------------------------------
This wallet address doesn't have a user ID relation. Please create one first.

--- Details ---
    Missing Requirement  : User-Key Relation
    Suggestion           : Use the /link-wallet endpoint
    Alternative          : Use the /create-wallet endpoint
--------------------------------------------------
```

```text Duplicate Registration (409)
ðŸš« FILE ALREADY REGISTERED ðŸš«
--------------------------------------------------
Looks like you have already registered this file. Please use the /search endpoint to find the existing record.

--- Details ---
    contentHash          : <CONTENT_HASH_HEX>
    pdaAddress           : <PDA_ADDRESS_HERE>
    Suggestion           : Use the /search endpoint
--------------------------------------------------
```

```text Token Error (400)
ðŸš« INSUFFICIENT TOKEN BALANCE ðŸš«
--------------------------------------------------
Insufficient token balance to complete registration.

--- Details ---
    Required Tokens      : ~<REQUIRED_TOKENS> tokens
    Your Balance         : <BALANCE_TOKENS> tokens
    Deficit              : <DEFICIT_TOKENS> tokens
    Suggestion           : Use the /mint-tokens endpoint
--------------------------------------------------
```
</CodeGroup>

---

## Prerequisites

Before registering a file, ensure you have:

<Check>**Wallet with user-key relation**: Use [`/create-wallet`](/essentials/create-wallet) or [`/link-wallet`](/essentials/link-wallet)</Check>
<Check>**File content hash**: Calculate SHA256 hash of your file content</Check>
<Check>**File metadata**: Name, size, and MIME type of your file</Check>
<Check>**Content title**: Descriptive title for your registration</Check>

<Warning>
**Common Issue**: If you get "User-Key Relation Required" error, create a wallet first using [`/create-wallet`](/essentials/create-wallet) or link an existing one with [`/link-wallet`](/essentials/link-wallet).
</Warning>

---

## Complete Example

Here's a full example of registering a file from start to finish:

<Steps>
  <Step title="Create Wallet (if needed)">
    ```bash
    curl -X POST https://core-api-server.onrender.com/create-wallet \
      -H "Content-Type: application/json" \
      -d '{"userID": "my-user-123"}'
    ```
    
    Save the `walletAddress` from the response.
  </Step>
  
  <Step title="Prepare File">
    Calculate your file's SHA256 hash:
    
    ```bash
    # Unix/Mac
    shasum -a 256 document.pdf
    
    # Output: abc123def456... document.pdf
    ```
  </Step>
  
  <Step title="Register File">
    ```bash
    curl -X POST https://core-api-server.onrender.com/register \
      -H "Content-Type: application/json" \
      -d '{
        "contentTitle": "Important Contract",
        "walletAddress": "YOUR_WALLET_ADDRESS",
        "walletType": "crossmint",
        "contentHash": "abc123def456...",
        "fileMetadata": {
          "fileName": "contract.pdf",
          "fileSize": 245760,
          "mimeType": "application/pdf"
        },
        "metadata": "Legal contract for project X"
      }'
    ```
  </Step>
  
  <Step title="Verify Registration">
    Check that your file was registered:
    
    ```bash
    curl -X POST https://core-api-server.onrender.com/search \
      -H "Content-Type: application/json" \
      -d '{"contentHash": "abc123def456..."}'
    ```
  </Step>
</Steps>

---

## Next Steps

After registering a file:

<CardGroup cols={2}>
  <Card title="Search for File" icon="magnifying-glass" href="/api-reference/endpoint/search">
    Use the `/search` endpoint to find your registered file
  </Card>
  
  <Card title="Check Wallet Balance" icon="wallet" href="/essentials/wallet-balance">
    Use the `/wallet-balance` endpoint
  </Card>
  
  <Card title="Create More Wallets" icon="plus" href="/essentials/create-wallet">
    Use the `/create-wallet` endpoint
  </Card>
  
  <Card title="Store Relations" icon="link" href="/api-reference/endpoint/link-wallet">
    Use the `/link-wallet` endpoint if needed
  </Card>
</CardGroup>

<Tip>
Save the IPFS CID and transaction signature from the response for future reference. These provide cryptographic proof of your file's registration.
</Tip>
