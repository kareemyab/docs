---
title: '/register'
description: 'Registers a file with the Trust Engine protocol, initiating the decentralized verification process.'
icon: 'file-plus'
openapi: 'POST /register'
---

<div style={{display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '24px'}}>
  <span style={{backgroundColor: '#16a34a', color: 'white', padding: '4px 12px', borderRadius: '6px', fontSize: '14px', fontWeight: 'bold'}}>POST</span>
  <code>/register</code>
</div>

<Info>
**Rate Limit:** 10 requests per 60 minutes
</Info>

## Quick Start

### Installation

```bash
npm install trust-engine-sdk
```

---

## Accepted Types of Digital Media

| Category | Extensions | MIME Types |
|---|---|---|
| Images | `.jpg`, `.jpeg`, `.png`, `.gif`, `.webp` | `image/jpeg`, `image/png`, `image/gif`, `image/webp` |
| Video | `.ts` | `video/mp2t` |
| Documents | `.pdf`, `.docx`, `.txt`, `.md`, `.csv` | `application/pdf`, `application/vnd.openxmlformats-officedocument.wordprocessingml.document`, `text/plain`, `text/markdown`, `text/csv` |
| Code/Data | `.json`, `.js`, `.ts` | `application/json`, `application/javascript`, `application/octet-stream` |
| Archives | `.zip` | `application/zip` |
| Cryptographic | `.zkey`, `.wasm` | `application/octet-stream` |


### Complete Example

<CodeGroup>
```typescript SDK (Recommended)
import { registerFile } from 'trust-engine-sdk';

async function registerDocument() {
  // Get file from file input or create File object
  const fileInput = document.getElementById('fileInput') as HTMLInputElement;
  const file = fileInput.files[0];
  
  try {
    const result = await registerFile({
      file: file,
      contentTitle: "My Awesome Document",
      contentDescription: "A description of my awesome document.",
      walletAddress: "YourWalletAddressGoesHere",
      walletType: "crossmint",
      metadata: {
        author: "John Doe",
        version: "1.0",
        category: "document"
      }
    });
    
    console.log('‚úÖ Registration successful!');
    console.log('Transaction ID:', result.details.transactionSignature);
    console.log('IPFS CID:', result.details.ipfsCid);
    
    return result;
  } catch (error) {
    console.error('‚ùå Registration failed:', error.message);
    throw error;
  }
}

// Usage
registerDocument()
  .then(result => console.log('File registered:', result))
  .catch(error => console.error('Error:', error));
```

```bash cURL
curl -X POST http://localhost:3000/register \
  -F "file=@/path/to/your/document.pdf" \
  -F "walletAddress=YourWalletAddressGoesHere" \
  -F "contentTitle=My Awesome Document" \
  -F "contentDescription=A description of my awesome document." \
  -F "walletType=crossmint" \
  -F 'metadata={"author":"John Doe","version":"1.0","category":"document"}'
```

```javascript Raw JavaScript
async function registerFile(fileInput, walletAddress, contentTitle, contentDescription) {
  const formData = new FormData();
  formData.append('file', fileInput.files[0]);
  formData.append('walletAddress', walletAddress);
  formData.append('contentTitle', contentTitle);
  formData.append('contentDescription', contentDescription);
  formData.append('walletType', 'crossmint');
  formData.append('metadata', JSON.stringify({
    author: "John Doe",
    version: "1.0",
    category: "document"
  }));

  try {
    const response = await fetch('http://localhost:3000/register', {
      method: 'POST',
      body: formData
    });
    
    const data = await response.text(); // Register returns text, not JSON
    
    if (response.ok) {
      console.log('‚úÖ Registration successful!');
      console.log(data);
      return data;
    } else {
      throw new Error(data);
    }
  } catch (error) {
    console.error('‚ùå Registration failed:', error.message);
    throw error;
  }
}
```
</CodeGroup>

### Expected Response

```text
‚úÖ SUBMISSION ACCEPTED ‚úÖ
--------------------------------------------------
‚úÖ Accepted! Your file has been submitted for verification via Crossmint.

--- Details ---
    Status              : Pending Verification
    Transaction ID      : abc123def456ghi789jklmnop...
    Content Registration PDA: xyz789abc123def456ghi...
    IPFS CID            : QmExampleCidForYourFileMetadata...
    Processing Fee      : ~0.000005000 SOL (5,000 lamports)
    Solana Explorer     : https://explorer.solana.com/tx/abc123def456ghi789jklmnop...?cluster=devnet
--------------------------------------------------
```


### Prerequisites

<Check>Wallet with sufficient Reward Tokens</Check>
<Check>Valid file within allowed types</Check>

---

## Parameters

<ResponseField name="file" type="File" required>
  The file to be registered
  
  **Constraints:** Must be an allowed file type, virus-free
  
  **Supported Types:** PDF, DOC, DOCX, TXT, PNG, JPG, JPEG, etc.
</ResponseField>

<ResponseField name="walletAddress" type="string" required>
  User's public Solana wallet address
  
  **Constraints:** Must be a valid Solana public key
  
  Example: `"B5k2yCBinet3dDsWGdkJeEsHAFoQgc3i6htHK6EBsVRa"`
</ResponseField>

<ResponseField name="contentTitle" type="string" required>
  Title for the content being registered
  
  **Constraints:** Maximum 100 characters
  
  Example: `"My Important Document"`
</ResponseField>

<ResponseField name="contentDescription" type="string" required>
  Brief description of the content
  
  **Constraints:** Maximum 500 characters
  
  Example: `"A comprehensive report on blockchain technology"`
</ResponseField>

<ResponseField name="walletType" type="string" required>
  Wallet provider type used for registration
  
  **Constraints:** Currently supports only `crossmint`
  
  Example: `"crossmint"`
</ResponseField>

<ResponseField name="metadata" type="string" optional>
  Stringified JSON object for additional metadata
  
  **Format:** Each key should have `value` and `visibility` properties
  
  **Constraints:** Max 5 public, 5 private metadata entries
  
  Example: `'{"author":{"value":"John Doe","visibility":"public"}}'`
</ResponseField>


---

## Response Examples

### Success Responses

<CodeGroup>
```text Success (202 Crossmint)
‚úÖ SUBMISSION ACCEPTED ‚úÖ
--------------------------------------------------
‚úÖ Accepted! Your file has been submitted for verification via Crossmint.

--- Details ---
    Status                  : Pending Verification
    Transaction ID          : <TRANSACTION_ID_HERE>
    Content Registration PDA: <PDA_ADDRESS_HERE>
    IPFS CID                : <IPFS_CID_HERE>
    Processing Fee          : ~<SOL_AMOUNT> SOL (<LAMPORTS> lamports)
    Solana Explorer         : https://explorer.solana.com/tx/<TRANSACTION_ID_HERE>?cluster=<cluster>
--------------------------------------------------
```

```text Success (200 Standard Wallet)
‚úÖ TRANSACTION READY ‚úÖ
--------------------------------------------------
Transaction prepared. Please sign and submit via your wallet.

--- Details ---
    Status                  : Requires Client Signature
    IPFS CID                : <IPFS_CID_HERE>
    Content Registration PDA: <PDA_ADDRESS_HERE>
    Transaction (Base64)    : <BASE64_TRANSACTION_HERE>
--------------------------------------------------
```
</CodeGroup>

### Common Error Responses

<CodeGroup>
```text Missing File (400)
üö´ FILE MISSING üö´
--------------------------------------------------
Oops! It looks like you forgot to upload a file. Please attach a file to your request.
--------------------------------------------------
```

```text File Validation Failed (400)
üö´ FILE VALIDATION FAILED üö´
--------------------------------------------------
File validation failed: File type not allowed: <mime/type>
--------------------------------------------------
```

```text Missing Required Fields (400)
üö´ MISSING REQUIRED FIELDS üö´
--------------------------------------------------
Hold on! We need `contentTitle`, `contentDescription`, `walletAddress`, and `walletType` to proceed.

--- Details ---
    missingFields        : [contentTitle, contentDescription, walletAddress, walletType]
--------------------------------------------------
```

```text Invalid Wallet Type (400)
üö´ INVALID WALLET TYPE üö´
--------------------------------------------------
Invalid `walletType`. It must be either 'standard' or 'crossmint'.
--------------------------------------------------
```

```text No User-Key Relation (400)
üö´ USER-KEY RELATION REQUIRED üö´
--------------------------------------------------
This wallet address doesn't have a user ID relation. Please create one first.

--- Details ---
    Missing Requirement  : User-Key Relation
    Suggestion           : Use the /store-user-key-relation endpoint
    Alternative          : Use the /create-wallet endpoint
--------------------------------------------------
```

```text Duplicate Registration (409)
üö´ FILE ALREADY REGISTERED üö´
--------------------------------------------------
Looks like you have already registered this file. Please use the /search endpoint to find the existing record.

--- Details ---
    contentHash          : <CONTENT_HASH_HEX>
    pdaAddress           : <PDA_ADDRESS_HERE>
    Suggestion           : Use the /search endpoint
--------------------------------------------------
```

```text Token Error (400)
üö´ INSUFFICIENT TOKEN BALANCE üö´
--------------------------------------------------
Insufficient token balance to complete registration.

--- Details ---
    Required Tokens      : ~<REQUIRED_TOKENS> tokens
    Your Balance         : <BALANCE_TOKENS> tokens
    Deficit              : <DEFICIT_TOKENS> tokens
    Suggestion           : Use the /mint-tokens endpoint
--------------------------------------------------
```
</CodeGroup>

---

## What This Endpoint Does

<Steps>
  <Step title="File Validation">
    Validates file type
  </Step>
  <Step title="Wallet Verification">
    Checks wallet has sufficient Reward Tokens for fees
  </Step>
  <Step title="IPFS Upload">
    Uploads file to IPFS and generates Content Identifier (CID)
  </Step>
  <Step title="On-Chain Registration">
    Creates immutable proof record on Solana blockchain
  </Step>
  <Step title="Verification Process">
    Initiates decentralized verification through validator network
  </Step>
</Steps>

---

## Next Steps

After registering a file:

<CardGroup cols={2}>
  <Card title="Search for File" icon="magnifying-glass" href="/api-reference/endpoint/search">
    Use `searchFile()` SDK method or `/search` endpoint to find your registered file
  </Card>
  
  <Card title="Check Wallet Balance" icon="wallet" href="/essentials/wallet-balance">
    Use `getWalletBalance()` SDK method or `/wallet-balance` endpoint
  </Card>
  
  <Card title="Create More Wallets" icon="plus" href="/essentials/create-wallet">
    Use `createWallet()` SDK method or `/create-wallet` endpoint
  </Card>
  
  <Card title="Store Relations" icon="link" href="/api-reference/endpoint/store-user-key-relation">
    Use `storeUserKeyRelation()` SDK method if needed
  </Card>
</CardGroup>

<Tip>
Save the IPFS CID and transaction signature from the response for future reference. These provide cryptographic proof of your file's registration.
</Tip>
