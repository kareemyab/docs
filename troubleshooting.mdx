---
title: 'Troubleshooting Guide'
description: 'Common issues, error messages, and solutions when working with Trust Engine.'
icon: 'wrench'
---

Having trouble with Trust Engine? This guide covers the most common issues and their solutions.

---

## Quick Diagnostics

Start here to quickly identify your issue:

<Steps>
  <Step title="Check API Status">
    Verify Trust Engine services are operational:
    
    ```bash
    curl -X GET https://core-api-server.onrender.com/health
    ```
    
    **Expected**: `"status": "All systems operational!"`
  </Step>
  
  <Step title="Verify Request Format">
    Ensure you're sending JSON with correct headers:
    
    ```bash
    curl -X POST https://core-api-server.onrender.com/endpoint \
      -H "Content-Type: application/json" \
      -d '{"param": "value"}'
    ```
  </Step>
  
  <Step title="Check Rate Limits">
    Most endpoints: 100 requests per 15 minutes  
    Uploads: 10 requests per hour  
    Validators: 50 requests per 5 minutes
  </Step>
  
  <Step title="Validate Parameters">
    Check that all required parameters are included and properly formatted
  </Step>
</Steps>

---

## Common Error Messages

### Authentication & Authorization

<AccordionGroup>
<Accordion title="❌ User-Key Relation Required">

**Error Message:**
```json
{
  "error": true,
  "message": "This wallet address doesn't have a user ID relation. Please create one first.",
  "details": {
    "suggestion": "Use the /link-wallet endpoint to link your wallet to a user ID first"
  }
}
```

**What it means**: You're trying to register a file with a wallet that hasn't been linked to a user ID.

**Solutions:**

<Tabs>
<Tab title="Create New Wallet">
```bash
# This automatically creates the user-wallet relationship
curl -X POST https://core-api-server.onrender.com/create-wallet \
  -H "Content-Type: application/json" \
  -d '{"userID": "your-unique-id"}'
```
</Tab>

<Tab title="Link Existing Wallet">
```bash
# Link your existing wallet to a user ID
curl -X POST https://core-api-server.onrender.com/link-wallet \
  -H "Content-Type: application/json" \
  -d '{
    "userID": "your-unique-id",
    "walletAddress": "your-wallet-address"
  }'
```
</Tab>
</Tabs>

</Accordion>

<Accordion title="❌ Invalid Wallet Address">

**Error Message:**
```json
{
  "error": true,
  "message": "Invalid wallet address format."
}
```

**What it means**: The wallet address you provided isn't a valid Solana public key.

**Solutions:**
- Ensure wallet address is 32-44 characters long
- Use Base58 encoding (no special characters except numbers and letters)
- Double-check for typos or missing characters

**Valid format example:**
```
9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM
```

</Accordion>
</AccordionGroup>

### File Registration Issues

<AccordionGroup>
<Accordion title="❌ File Already Registered">

**Error Message:**
```json
{
  "error": true,
  "message": "Looks like you have already registered this file.",
  "details": {
    "contentHash": "abc123...",
    "pdaAddress": "xyz789...",
    "suggestion": "Use the /search endpoint to find the existing record."
  }
}
```

**What it means**: A file with this exact content hash is already registered.

**Solutions:**

<Tabs>
<Tab title="Find Existing Registration">
```bash
curl -X POST https://core-api-server.onrender.com/search \
  -H "Content-Type: application/json" \
  -d '{"contentHash": "your-content-hash"}'
```
</Tab>

<Tab title="Register Different Version">
If you need to register a modified version:
1. Make a small change to the file content
2. Recalculate the hash
3. Register the new version
</Tab>
</Tabs>

</Accordion>

<Accordion title="❌ Invalid Content Hash">

**Error Message:**
```json
{
  "error": true,
  "message": "Invalid contentHash format. Must be 64-character hex string."
}
```

**What it means**: Your content hash isn't properly formatted.

**Solutions:**

<CodeGroup>
```bash Generate Correct Hash (Unix/Mac)
shasum -a 256 your-file.txt | cut -d' ' -f1
```

```javascript Generate Hash (Node.js)
import crypto from 'crypto';
import fs from 'fs';

const fileBuffer = fs.readFileSync('your-file.txt');
const hash = crypto.createHash('sha256').update(fileBuffer).digest('hex');
console.log(hash); // 64-character hex string
```

```python Generate Hash (Python)
import hashlib

with open('your-file.txt', 'rb') as f:
    content = f.read()
    hash_value = hashlib.sha256(content).hexdigest()
    print(hash_value)  # 64-character hex string
```
</CodeGroup>

**Requirements:**
- Exactly 64 characters long
- Hexadecimal only (0-9, a-f)
- Lowercase letters

</Accordion>

<Accordion title="❌ Missing Required Fields">

**Error Message:**
```json
{
  "error": true,
  "message": "Hold on! We need contentTitle, walletAddress, and walletType to proceed.",
  "details": {
    "missingFields": ["contentTitle", "walletAddress", "walletType"]
  }
}
```

**What it means**: Your request is missing required parameters.

**Solution - Complete Request Example:**
```bash
curl -X POST https://core-api-server.onrender.com/register \
  -H "Content-Type: application/json" \
  -d '{
    "contentTitle": "My Document",           # Required
    "walletAddress": "9WzDXwBb...",         # Required  
    "walletType": "crossmint",              # Required
    "contentHash": "abc123...",             # Required
    "fileMetadata": {                       # Optional but recommended
      "fileName": "document.pdf",
      "fileSize": 12345,
      "mimeType": "application/pdf"
    },
    "metadata": "Additional info",          # Optional
    "claimHash": "def456..."               # Optional
  }'
```

</Accordion>
</AccordionGroup>

### Network & Connectivity

<AccordionGroup>
<Accordion title="❌ Rate Limit Exceeded">

**Error Message:**
```json
{
  "message": "Too many requests, please try again later."
}
```

**What it means**: You've exceeded the API rate limits.

**Rate Limits:**
- **General endpoints**: 100 requests per 15 minutes
- **File uploads**: 10 requests per hour  
- **Validator data**: 50 requests per 5 minutes

**Solutions:**
1. **Wait**: Rate limits reset automatically
2. **Implement backoff**: Add delays between requests
3. **Batch operations**: Combine multiple operations where possible
4. **Cache results**: Store responses locally to reduce API calls

**Exponential Backoff Example:**
```javascript
async function makeRequestWithBackoff(url, data, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      
      if (response.status === 429) {
        const delay = Math.pow(2, i) * 1000; // 1s, 2s, 4s delays
        console.log(`Rate limited, waiting ${delay}ms...`);
        await new Promise(resolve => setTimeout(resolve, delay));
        continue;
      }
      
      return await response.json();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
    }
  }
}
```

</Accordion>

<Accordion title="❌ Network Connection Failed">

**Error Message:**
```json
{
  "error": true,
  "message": "Network request failed"
}
```

**What it means**: Unable to connect to Trust Engine servers.

**Troubleshooting Steps:**

<Steps>
  <Step title="Check Internet Connection">
    ```bash
    ping google.com
    ```
  </Step>
  
  <Step title="Verify API Endpoint">
    ```bash
    curl -I https://core-api-server.onrender.com/health
    ```
  </Step>
  
  <Step title="Check Firewall/Proxy">
    Ensure your network allows HTTPS traffic to `core-api-server.onrender.com`
  </Step>
  
  <Step title="Try Different Network">
    Test from a different internet connection to isolate network issues
  </Step>
</Steps>

</Accordion>
</AccordionGroup>

### Validation & Consensus

<AccordionGroup>
<Accordion title="⚠️ Validation Pending">

**Status:**
```json
{
  "finalized": false,
  "consensusPercentage": 0,
  "totalVotes": 0
}
```

**What it means**: Your file is registered but validators haven't started voting yet.

**Typical timeline**: 5-15 minutes for validation to complete

**What to do:**
1. **Wait**: This is normal - validation takes time
2. **Check again**: Query the `/search` endpoint periodically
3. **Monitor progress**: Watch for `totalVotes` to increase

</Accordion>

<Accordion title="⚠️ Consensus Not Reached">

**Status:**
```json
{
  "finalized": true,
  "consensusPercentage": 33,
  "totalVotes": 3,
  "yesVotes": 1,
  "noVotes": 2
}
```

**What it means**: Validators completed review but couldn't agree (need ≥67% consensus).

**Possible reasons:**
- File metadata inconsistencies
- Technical issues during validation
- Legitimate concerns about content

**What to do:**
1. **Review your submission**: Check that all metadata is accurate
2. **Try re-registering**: If you believe it was an error
3. **Contact support**: For persistent issues

</Accordion>
</AccordionGroup>

---

## SDK-Specific Issues

### JavaScript/TypeScript SDK

<AccordionGroup>
<Accordion title="❌ Module Import Errors">

**Error:**
```bash
Cannot resolve module '@trust-engine/sdk'
```

**Solutions:**

<Tabs>
<Tab title="Install SDK">
```bash
npm install @trust-engine/sdk
```
</Tab>

<Tab title="Check Import Path">
```javascript
// Correct import
import { CoreApiSDK } from '@trust-engine/sdk';

// Initialize
const sdk = new CoreApiSDK();
```
</Tab>

<Tab title="Node.js vs Browser">
```javascript
// Node.js
import { CoreApiSDK } from '@trust-engine/sdk';

// Browser (if using bundler)
import { CoreApiSDK } from '@trust-engine/sdk/browser';
```
</Tab>
</Tabs>

</Accordion>

<Accordion title="❌ File Processing Errors">

**Error:**
```javascript
TypeError: Cannot read property 'arrayBuffer' of undefined
```

**Solution:**
```javascript
// Correct file handling
const registerFile = async (file) => {
  // Ensure file is valid
  if (!file) {
    throw new Error('No file provided');
  }
  
  // Check file size
  if (file.size > 100 * 1024 * 1024) { // 100MB
    throw new Error('File too large');
  }
  
  try {
    const result = await sdk.registerFile({
      file: file,
      contentTitle: 'My File',
      walletAddress: 'your-wallet-address',
      walletType: 'crossmint'
    });
    
    return result;
  } catch (error) {
    console.error('Registration failed:', error);
    throw error;
  }
};
```

</Accordion>
</AccordionGroup>

### CLI Issues

<AccordionGroup>
<Accordion title="❌ Command Not Found">

**Error:**
```bash
core-api-cli: command not found
```

**Solution:**
```bash
# Install globally
npm install -g @trust-engine/cli

# Or use npx
npx @trust-engine/cli --help
```

</Accordion>

<Accordion title="❌ File Path Issues">

**Error:**
```bash
Error: ENOENT: no such file or directory
```

**Solutions:**

<Tabs>
<Tab title="Check File Path">
```bash
# Use absolute path
core-api-cli register \
  --file /absolute/path/to/file.txt \
  --contentTitle "My File" \
  --walletAddress "your-wallet" \
  --walletType "crossmint"
```
</Tab>

<Tab title="Use Relative Path">
```bash
# Ensure you're in the right directory
pwd
ls -la file.txt

# Then use relative path
core-api-cli register \
  --file ./file.txt \
  --contentTitle "My File" \
  --walletAddress "your-wallet" \
  --walletType "crossmint"
```
</Tab>
</Tabs>

</Accordion>
</AccordionGroup>

---

## Performance Issues

### Slow Response Times

<AccordionGroup>
<Accordion title="Optimize Request Patterns">

**Problem**: API calls taking too long

**Solutions:**

<Tabs>
<Tab title="Parallel Requests">
```javascript
// Instead of sequential calls
const wallet = await sdk.createWallet({userID: 'user1'});
const balance = await sdk.getWalletBalance({walletAddress: wallet.address});

// Do parallel calls when possible
const [wallet, otherData] = await Promise.all([
  sdk.createWallet({userID: 'user1'}),
  sdk.getValidatorData({walletAddress: 'existing-wallet'})
]);
```
</Tab>

<Tab title="Cache Results">
```javascript
// Cache frequently accessed data
const cache = new Map();

async function getCachedValidatorData(walletAddress) {
  const cacheKey = `validator-${walletAddress}`;
  
  if (cache.has(cacheKey)) {
    const cached = cache.get(cacheKey);
    if (Date.now() - cached.timestamp < 300000) { // 5 min cache
      return cached.data;
    }
  }
  
  const data = await sdk.getValidatorData({walletAddress});
  cache.set(cacheKey, {data, timestamp: Date.now()});
  return data;
}
```
</Tab>
</Tabs>

</Accordion>
</AccordionGroup>

---

## Getting Help

If you're still having issues after trying these solutions:

<CardGroup cols={2}>
  <Card title="Check API Status" icon="heartbeat" href="https://status.trustengine.org">
    Real-time status of Trust Engine services
  </Card>
  
  <Card title="Community Discord" icon="discord" href="https://discord.gg/your-invite">
    Get help from developers and the team
  </Card>
  
  <Card title="Email Support" icon="envelope" href="mailto:kareem@trustengine.org">
    Direct support for technical issues
  </Card>
  
  <Card title="GitHub Issues" icon="github" href="https://github.com/trust-engine/sdk/issues">
    Report bugs and request features
  </Card>
</CardGroup>

## Reporting Issues

When reporting problems, please include:

<Check>**Error message** (exact text)</Check>
<Check>**Request details** (endpoint, parameters)</Check>
<Check>**Expected behavior** vs actual behavior</Check>
<Check>**Environment** (browser, Node.js version, OS)</Check>
<Check>**Steps to reproduce** the issue</Check>

**Example:**
```markdown
**Error**: "Invalid contentHash format"
**Endpoint**: POST /register
**Parameters**: contentHash: "abc123" (only 6 chars instead of 64)
**Expected**: Successful registration
**Actual**: 400 error
**Environment**: Node.js 18.0.0, macOS
**Steps**: 
1. Calculate hash with `crypto.createHash('md5')` (should be sha256)
2. Call register endpoint
3. Error occurs
```

<Tip>
**Quick Fix Checklist**: Before asking for help, verify your content hash is 64 characters, wallet address is valid Base58, and you have the user-wallet relationship established.
</Tip>
