---
title: Search for a File
description: 'Searches for existing on-chain registration records by uploading a file and matching its content hash.'
---

## Function Signature

```typescript
function searchFile(
  file: File,
  walletAddress?: string
): Promise<Response>;
```

<ResponseField name="file" type="File" required>
  The file to search for.
</ResponseField>

<ResponseField name="walletAddress" type="string" optional>
  Optional wallet address to filter search results to specific registrations.
</ResponseField>

<ResponseField name="Promise" type="Promise<[Response](/sdk-reference/types#searchfile-response)>">
  A promise that resolves with the response from searching for a file.
</ResponseField>

<Info>
**Search Modes:**
- **File only**: Returns all registrations for this file hash
- **File + Wallet**: Returns specific registration by this wallet for this file hash

**Type Definitions**: For detailed type information, visit the [Types](/sdk-reference/types#searchfile) page.
</Info>

## Usage

<CodeGroup>
```tsx React / Next.js
import { CoreApiSDK } from '@trust-engine/sdk';
import { useState } from 'react';

const sdk = new CoreApiSDK();

export default function FileSearch() {
  const [file, setFile] = useState<File | null>(null);
  const [isSearching, setIsSearching] = useState(false);
  const [result, setResult] = useState<any | null>(null);

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files) {
      setFile(e.target.files[0]);
    }
  };

  const handleSearch = async () => {
    if (!file) return;
    setIsSearching(true);
    try {
      // Search all registrations for this file
      const searchResult = await sdk.searchFile(file);
      
      // Or search for specific wallet's registration:
      // const searchResult = await sdk.searchFile(file, 'specific-wallet-address');
      
      setResult(searchResult);
    } catch (error) {
      console.error('‚ùå Search failed:', error.message);
      setResult({ error: error.message });
    } finally {
      setIsSearching(false);
    }
  };

  return (
    <div>
      <input type="file" onChange={handleFileChange} />
      <button onClick={handleSearch} disabled={!file || isSearching}>
        {isSearching ? 'Searching...' : 'Search for File'}
      </button>
      {result && <pre>{JSON.stringify(result, null, 2)}</pre>}
    </div>
  );
}
```
```typescript Node.js
import { CoreApiSDK } from '@trust-engine/sdk';
import { promises as fs } from 'fs';
import { File } from 'buffer';

const sdk = new CoreApiSDK();

async function findFileRegistration() {
  try {
    const fileContent = await fs.readFile('path/to/your/file.txt');
    const file = new File([fileContent], 'file.txt');

    // Search for all registrations of this file
    console.log('üîç Searching for all registrations...');
    const allResults = await sdk.searchFile(file);
    
    // Search for specific wallet's registration
    console.log('üîç Searching for specific wallet registration...');
    const specificResult = await sdk.searchFile(file, '9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM');
    
    if (allResults.registrations && allResults.registrations.length > 0) {
      console.log(`‚úÖ Found ${allResults.totalResults} registration(s)!`);
      allResults.registrations.forEach((record, index) => {
        console.log(`Record ${index + 1}:`);
        console.log('- Registered by:', record.registeredBy);
        console.log('- User ID:', record.userID);
        console.log('- IPFS CID:', record.ipfsCid);
        console.log('- Status:', record.validationStatus);
        console.log('- Consensus:', record.consensus);
      });
    } else {
      console.log('No records found for this file.');
    }
    
    return { all: allResults, specific: specificResult };
  } catch (error) {
    if (error.message.includes('does not exist')) {
      console.log('‚ÑπÔ∏è File has not been registered yet');
    } else {
      console.error('‚ùå Search failed:', error.message);
    }
    throw error;
  }
}

findFileRegistration();
```
</CodeGroup>
