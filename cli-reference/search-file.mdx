# Trust Engine search-file

> Search for a file by its content hash

The search-file command allows you to search for a file in the Trust Engine registry by uploading the file and checking if its content hash exists on the blockchain. You can search for all registrations of a file or filter by a specific wallet address.

To use it, run the following command from your terminal

```bash
trust-engine-cli search-file [options]
```

## Options

| Option                      | Description                                       |
| --------------------------- | ------------------------------------------------- |
| `-f, --file <path>`         | Path to the file to search for                   |
| `-w, --walletAddress <address>` | Wallet address to search for (Solana public key) |
| `--json`                    | Output the result as JSON                         |

## Examples

Search for a file:

```bash
trust-engine-cli search-file --file ./document.pdf
```

After running the command, you'll see search results:

```
✅ Found 1 registration(s) for your file content.

Search Information:
  - Search Mode: content_hash
  - Content Hash: abc123def456789ghi012jkl345mno678pqr901
  - Total Results: 1

Registration Details:

--- Registration 1 ---
  - Content Hash: abc123def456789ghi012jkl345mno678pqr901
  - PDA Address: 9MzRqTnV8mYpH4xL9WvNfEtY2jDw5mVpQcfGKJH2mNqR
  - IPFS CID: QmExampleCidForYourFileMetadata123
  - Registered By: 9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM
  - User ID: user_12345
  - Timestamp: 2024-01-15T10:30:45.123Z
  - Validation Status: validated
  - Consensus: high
  - Explorer URL: https://explorer.solana.com/address/8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY?cluster=devnet
```

You can also search for files registered by a specific wallet:

```bash
trust-engine-cli search-file --file ./document.pdf --walletAddress "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"
```

If no registrations are found:

```
✅ File search completed.

Search Information:
  - Search Mode: content_hash
  - Content Hash: abc123def456789ghi012jkl345mno678pqr901
  - Total Results: 0

No registrations found for this content.
```

For automation purposes, use the JSON output:

```bash
trust-engine-cli search-file --file ./document.pdf --json
```

This will return:

```json
{
  "message": "Found 1 registration(s) for your file content.",
  "searchMode": "content_hash",
  "searchCriteria": {
    "contentHash": "abc123def456789ghi012jkl345mno678pqr901"
  },
  "totalResults": 1,
  "registrations": [
    {
      "contentHash": "abc123def456789ghi012jkl345mno678pqr901",
      "pdaAddress": "9MzRqTnV8mYpH4xL9WvNfEtY2jDw5mVpQcfGKJH2mNqR",
      "ipfsCid": "QmExampleCidForYourFileMetadata123",
      "registeredBy": "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM",
      "userID": "user_12345",
      "timestamp": "2024-01-15T10:30:45.123Z",
      "status": "registered",
      "explorerUrl": "https://explorer.solana.com/address/8kQv2gFhgRmHq7ZPBx4N9TqJbSx3jDw5mVpL1WzNfEtY?cluster=devnet",
      "ipfsData": {},
      "onChainData": {}
    }
  ]
}
```
